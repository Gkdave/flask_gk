{% extends 'user/base.html' %}


   
{% block content %}
<div class="m-auto w-1/3">
    <h1 class="text-2xl text-center pb-2">All users!</h1>
    <div class="p-2 border rounded-md shadow-md mt-4">
     
        {% for user in users %}
       
            <a href="/user/{{user.id}}" style="flex my-4">
                <p>{{user.name}} </p></a>
                
                <div class="ml-28">  
                   <form id="{{user.id}}" class="delete-form">
                        <button class="bg-red-500 text-white rounded-md px-2 py-1" type="submit">Delete</button>
                    </form>
                </div>
           
        {% endfor %}
      
    </div>
</div>
<script>
    document.addEventListener('submit', (e) => {
        if (e.target.classList.contains('delete-form')){
        e.preventDefault();
        const id = e.target.id;
        fetch(`/user/${id}`,{
            method:'DELETE'
        }).then(() =>{
            alert(id)
            window.location.href = '/user/';
        })
       
    }
})

</script>

{% endblock %}
